<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WAYNAçš„æ‰‹æ©ŸéŠæˆ²å¤©å ‚ - NEON MOBILE V9.2</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #bc13fe;
            --neon-green: #0aff68;
            --neon-red: #ff0055;
            --bg-dark: #050511;
            --bg-panel: rgba(20, 20, 35, 0.95);
            --text-main: #e0e6ed;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            font-family: 'Orbitron', 'Noto Sans TC', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        /* Mobile Layout Adjustments */
        #sidebar {
            width: 280px; background: var(--bg-panel); backdrop-filter: blur(10px);
            border-right: 1px solid rgba(0, 243, 255, 0.3); padding: 20px;
            display: flex; flex-direction: column; overflow-y: auto; z-index: 20;
            box-shadow: 5px 0 25px rgba(0,0,0,0.8);
            transition: transform 0.3s ease;
        }

        /* Mobile Toggle Button */
        #menu-toggle {
            display: none; position: fixed; top: 10px; left: 10px; z-index: 100;
            background: var(--bg-panel); border: 1px solid var(--neon-blue); color: var(--neon-blue);
            padding: 8px 12px; border-radius: 5px; cursor: pointer; font-family: 'Orbitron';
        }

        h1 { 
            font-size: 24px; color: var(--neon-blue); text-align: center; margin-bottom: 20px;
            text-shadow: 0 0 10px var(--neon-blue); border-bottom: 2px solid var(--neon-pink); padding-bottom: 15px;
            letter-spacing: 2px;
        }
        
        #slack-timer-box {
            background: rgba(0,0,0,0.4); border: 1px solid var(--neon-green); box-shadow: 0 0 5px var(--neon-green);
            border-radius: 4px; padding: 10px; text-align: center; margin-bottom: 20px;
        }
        #slack-timer { font-size: 22px; font-weight: bold; color: var(--neon-green); font-family: monospace; text-shadow: 0 0 5px var(--neon-green); }
        .timer-label { font-size: 12px; color: #888; text-transform: uppercase; letter-spacing: 1px; }

        .nav-header { 
            font-size: 12px; color: var(--neon-pink); margin-top: 15px; margin-bottom: 8px; 
            text-transform: uppercase; border-bottom: 1px solid rgba(188, 19, 254, 0.3); padding-bottom: 2px;
            letter-spacing: 1px; font-weight: bold;
        }

        .nav-btn {
            background: linear-gradient(90deg, rgba(255,255,255,0.05) 0%, transparent 100%);
            border: none; border-left: 3px solid transparent; color: #aaa; padding: 12px 15px; margin-bottom: 4px;
            cursor: pointer; text-align: left; transition: 0.3s; font-size: 14px; width: 100%; font-family: 'Noto Sans TC', sans-serif;
        }
        .nav-btn.active { 
            background: linear-gradient(90deg, rgba(188, 19, 254, 0.2) 0%, transparent 100%);
            color: #fff; border-left-color: var(--neon-pink); text-shadow: 0 0 8px var(--neon-pink); font-weight: bold;
        }

        #game-area {
            flex: 1; padding: 10px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; 
            position: relative; overflow-y: auto; padding-bottom: 180px; /* Space for controls */
        }

        .game-section {
            display: none; background: rgba(16, 20, 30, 0.85); backdrop-filter: blur(5px);
            padding: 20px; border-radius: 15px; box-shadow: 0 0 30px rgba(0, 243, 255, 0.15); 
            text-align: center; width: 100%; max-width: 600px; border: 1px solid rgba(0, 243, 255, 0.3); 
            margin-top: 40px; /* Space for menu button */
        }
        .game-section.active { display: block; animation: zoomIn 0.3s ease-out; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        h2 { color: var(--neon-blue); text-shadow: 0 0 10px var(--neon-blue); margin-top: 0; font-size: 24px;}

        button.action-btn {
            background: transparent; color: var(--neon-blue); border: 2px solid var(--neon-blue); padding: 8px 20px;
            font-size: 16px; cursor: pointer; border-radius: 5px; margin: 10px; font-weight: bold; transition: 0.2s; outline: none;
            font-family: 'Orbitron', sans-serif; box-shadow: 0 0 5px var(--neon-blue) inset;
        }
        button.action-btn:active { background: var(--neon-blue); color: #000; }

        .control-panel { display: flex; gap: 5px; justify-content: center; margin-bottom: 10px; flex-wrap: wrap; }
        .control-btn {
            background: rgba(0,0,0,0.5); border: 1px solid #555; color: #aaa; padding: 5px 12px; cursor: pointer; border-radius: 20px;
        }
        .control-btn.active { background: var(--neon-pink); color: #fff; border-color: var(--neon-pink); box-shadow: 0 0 10px var(--neon-pink); }

        input { padding: 8px; font-size: 16px; width: 100px; text-align: center; background: rgba(0,0,0,0.5); border: 1px solid var(--neon-pink); color: #fff; border-radius: 5px; outline: none; }
        
        canvas { background: #000; border: 2px solid #333; margin: 0 auto; display: block; max-width: 100%; box-shadow: 0 0 15px rgba(0,0,0,0.8); border-radius: 4px; touch-action: none; }

        /* --- Mobile Virtual Controls --- */
        #mobile-controls {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 160px;
            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0));
            z-index: 50; display: flex; justify-content: space-between; align-items: center;
            padding: 10px 20px 30px 20px; pointer-events: none; /* Let clicks pass through empty areas */
        }
        
        .d-pad, .action-pad { pointer-events: auto; }

        .d-pad {
            display: grid; grid-template-columns: 60px 60px 60px; grid-template-rows: 50px 50px;
            gap: 5px; justify-items: center; align-items: center;
        }
        
        .d-btn {
            width: 55px; height: 50px; background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--neon-blue); border-radius: 8px;
            color: var(--neon-blue); font-size: 24px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 0 10px rgba(0, 243, 255, 0.2); transition: 0.1s;
        }
        .d-btn:active, .d-btn.active-touch { background: var(--neon-blue); color: #000; box-shadow: 0 0 20px var(--neon-blue); transform: scale(0.95); }
        
        .d-up { grid-column: 2; grid-row: 1; }
        .d-left { grid-column: 1; grid-row: 2; }
        .d-down { grid-column: 2; grid-row: 2; }
        .d-right { grid-column: 3; grid-row: 2; }

        .action-pad { display: flex; align-items: center; justify-content: center; padding-right: 10px; }
        .a-btn {
            width: 70px; height: 70px; border-radius: 50%; background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--neon-pink); color: var(--neon-pink); font-size: 18px; font-weight: bold;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            box-shadow: 0 0 15px rgba(188, 19, 254, 0.3); transition: 0.1s;
        }
        .a-btn:active, .a-btn.active-touch { background: var(--neon-pink); color: #fff; box-shadow: 0 0 30px var(--neon-pink); transform: scale(0.95); }


        /* --- Game Styles (Compact) --- */
        .board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin: 10px auto; width: 200px; }
        .cell { width: 60px; height: 60px; background: rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; font-size: 36px; border: 1px solid #444; color: #fff; }
        .cell.taken { color: var(--neon-green); }

        .puzzle-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; width: 240px; margin: 10px auto; }
        .puzzle-tile { width: 55px; height: 55px; background: var(--neon-blue); color: #000; font-size: 20px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .puzzle-tile.empty { background: transparent; }

        #grid-2048 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; width: 240px; margin: 10px auto; background: #222; padding: 5px; }
        .tile-2048 { width: 50px; height: 50px; font-size: 20px; }

        @media (max-width: 800px) {
            body { flex-direction: column; }
            #sidebar { 
                position: fixed; top: 0; left: 0; width: 260px; height: 100vh; 
                transform: translateX(-100%); transition: transform 0.3s ease;
                box-shadow: 2px 0 10px rgba(0,0,0,0.8);
            }
            #sidebar.open { transform: translateX(0); }
            #menu-toggle { display: block; }
            #game-area { width: 100%; height: 100vh; padding: 10px; padding-bottom: 180px;}
            .game-section { width: 100%; padding: 15px; margin-top: 50px; max-height: 70vh; overflow-y: auto;}
            
            /* Hide controls for non-action games to save space if needed, currently always shown */
        }
    </style>
</head>
<body>

    <button id="menu-toggle" onclick="toggleMenu()">â˜° é¸å–®</button>

    <div id="sidebar">
        <h1>WAYNA<br>GAME PARADISE</h1>
        <div id="slack-timer-box">
            <div class="timer-label">æ‘¸é­šè¨ˆæ™‚å™¨</div>
            <div id="slack-timer">00:00:00</div>
        </div>
        <button class="nav-btn active" onclick="switchGame('welcome')">ğŸ  å¤§å»³é¦–é </button>

        <div class="nav-header">ç¶“å…¸</div>
        <button class="nav-btn" onclick="switchGame('game1')">â­•âŒ äº•å­—éŠæˆ²</button>
        <button class="nav-btn" onclick="switchGame('game2')">ğŸ”¢ çµ‚æ¥µå¯†ç¢¼</button>
        <button class="nav-btn" onclick="switchGame('game3')">âœŒâœŠâœ‹ çŒœæ‹³</button>
        <button class="nav-btn" onclick="switchGame('game4')">âš¡ æ‰‹é€Ÿç‹</button>
        <button class="nav-btn" onclick="switchGame('game5')">ğŸ¨ åæ‡‰åŠ›</button>

        <div class="nav-header">æŠ€è¡“ (éœ€æŒ‰éµ)</div>
        <button class="nav-btn" onclick="switchGame('game6')">ğŸ è²ªé£Ÿè›‡</button>
        <button class="nav-btn" onclick="switchGame('game7')">ğŸ¹ æ‰“åœ°é¼ </button>
        <button class="nav-btn" onclick="switchGame('game8')">ğŸ´ è¨˜æ†¶ç¿»ç‰Œ</button>
        <button class="nav-btn" onclick="switchGame('game9')">ğŸš€ é–ƒé¿çƒ</button>
        <button class="nav-btn" onclick="switchGame('game10')">â• æ•¸å­¸éš¨å ‚è€ƒ</button>

        <div class="nav-header">ä¼‘é–’</div>
        <button class="nav-btn" onclick="switchGame('game11')">ğŸ§± æ‰“ç£šå¡Š</button>
        <button class="nav-btn" onclick="switchGame('game12')">ğŸ’£ è¸©åœ°é›·</button>
        <button class="nav-btn" onclick="switchGame('game13')">ğŸ° å¹¸é‹æ‹‰éœ¸</button>
        <button class="nav-btn" onclick="switchGame('game14')">ğŸ§  åºåˆ—è¨˜æ†¶</button>
        <button class="nav-btn" onclick="switchGame('game15')">ğŸ§© æ•¸å­—æ¨ç›¤</button>

        <div class="nav-header">é€²éš (éœ€æŒ‰éµ)</div>
        <button class="nav-btn" onclick="switchGame('game16')">ğŸ§± ä¿„ç¾…æ–¯æ–¹å¡Š</button>
        <button class="nav-btn" onclick="switchGame('game17')">ğŸ¦ é£›ç¿”å°é³¥</button>
        <button class="nav-btn" onclick="switchGame('game18')">ğŸ“ å¾©å¤ä¹’ä¹“</button>
        <button class="nav-btn" onclick="switchGame('game19')">ğŸ”¢ 2048</button>
        <button class="nav-btn" onclick="switchGame('game20')">ğŸ˜µ å­—è‰²å¤§è€ƒé©—</button>

        <div class="nav-header">ç‡’è…¦</div>
        <button class="nav-btn" onclick="switchGame('game21')">âš«âšª é»‘ç™½æ£‹</button>
        <button class="nav-btn" onclick="switchGame('game22')">ğŸ’¡ é»ç‡ˆéŠæˆ²</button>
        <button class="nav-btn" onclick="switchGame('game23')">ğŸ”´ğŸŸ¡ å››å­æ£‹</button>
        <button class="nav-btn" onclick="switchGame('game24')">ğŸ¯ æ²³å…§å¡”</button>
        <button class="nav-btn" onclick="switchGame('game25')">âœï¸ éš¨æ‰‹å¡—é´‰</button>
    </div>

    <div id="game-area">
        <div id="welcome" class="game-section active">
            <h2 style="font-size: 32px; margin-bottom: 10px;">NEON MOBILE<br>PARADISE V9.2</h2>
            <p style="font-size: 16px; color: #fff;">æ‰‹æ©Ÿè§¸æ§å„ªåŒ–ç‰ˆ</p>
            <div style="margin: 20px; padding: 15px; border: 1px solid var(--neon-pink); border-radius: 10px; background: rgba(188, 19, 254, 0.1);">
                <p style="color: var(--neon-pink); font-weight: bold;">ğŸ“± æ‰‹æ©Ÿç‰ˆæ“ä½œèªªæ˜</p>
                <p style="color: #ccc; font-size: 14px;">ä¸‹æ–¹æ–°å¢äº†è™›æ“¬æ–¹å‘éµèˆ‡ A éµã€‚<br>é©ç”¨æ–¼ï¼šè²ªé£Ÿè›‡ã€ä¿„ç¾…æ–¯æ–¹å¡Šã€2048ã€ä¹’ä¹“çƒã€æ‰“ç£šå¡Šç­‰éŠæˆ²ã€‚</p>
            </div>
        </div>

        <div id="game1" class="game-section">
            <h2>äº•å­—éŠæˆ² (ç„¡æ•µç‰ˆ)</h2>
            <div class="score-board" id="ttt-status">è¼ªåˆ°ä½ </div>
            <div class="board" id="ttt-board"></div>
            <button class="action-btn" onclick="resetTTT()">RESTART</button>
        </div>
        
        <div id="game2" class="game-section"><h2>çµ‚æ¥µå¯†ç¢¼</h2><input type="number" id="guess-input" placeholder="0-100" onkeypress="if(event.key==='Enter') checkGuess()"><br><button class="action-btn" onclick="checkGuess()">GUESS</button><div class="score-board" id="guess-result">æº–å‚™é–‹å§‹</div><button class="action-btn" onclick="resetGuess()">RESET</button></div>
        <div id="game3" class="game-section"><h2>çŒœæ‹³</h2><div class="score-board" id="rps-score">0 - 0</div><div style="margin:20px;"><button class="action-btn" onclick="playRPS('âœŠ')">âœŠ</button><button class="action-btn" onclick="playRPS('âœ‹')">âœ‹</button><button class="action-btn" onclick="playRPS('âœŒ')">âœŒ</button></div><div id="rps-result" style="font-size:18px; color:#fff;">å‡ºæ‹³å§</div></div>
        <div id="game4" class="game-section"><h2>æ‰‹é€Ÿç‹</h2><div style="width:120px;height:120px;background:var(--neon-pink);border-radius:50%;margin:20px auto;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;box-shadow: 0 0 20px var(--neon-pink); font-size: 20px; font-weight:bold; color:#fff;" onmousedown="clickCount()" ontouchstart="clickCount(); event.preventDefault();">CLICK ME</div><div class="score-board"><span id="click-time">5.0</span>s | <span id="click-score">0</span></div><button class="action-btn" onclick="startClicker()">START</button></div>
        
        <div id="game5" class="game-section">
            <h2>åæ‡‰åŠ›æ¸¬è©¦</h2>
            <div id="reflex-box" style="width:100%;height:150px;background:#ce1212;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;font-size:24px;font-weight:bold; text-shadow: 0 0 5px #000; transition: background 0.2s;" onmousedown="reflexClick()" ontouchstart="reflexClick(); event.preventDefault();">é»æ“Šé–‹å§‹</div>
            <div class="score-board" id="reflex-msg"></div>
            <button class="action-btn" onclick="startReflex()">START</button>
        </div>
        
        <div id="game6" class="game-section">
            <h2>è²ªé£Ÿè›‡</h2>
            <div class="control-panel">
                <div class="control-btn active" onclick="setSnakeSpeed(130, this)">ä¸­é€Ÿ</div>
                <div class="control-btn" onclick="setSnakeSpeed(80, this)">å¿«é€Ÿ</div>
            </div>
            <div class="score-board">SCORE: <span id="snake-score">0</span> <span class="best-score">BEST: <span id="snake-best">0</span></span></div>
            <canvas id="snake-canvas" width="300" height="300"></canvas>
            <button class="action-btn" onclick="startSnake()">PLAY</button>
        </div>

        <div id="game7" class="game-section"><h2>æ‰“åœ°é¼ </h2><div class="score-board"><span id="mole-score">0</span> PTS | <span id="mole-time">30</span>s</div><div class="mole-grid" style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; width:220px; margin:0 auto;" id="mole-grid"></div><button class="action-btn" onclick="startMole()">START</button></div>
        <div id="game8" class="game-section"><h2>è¨˜æ†¶ç¿»ç‰Œ</h2><div class="memory-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:8px; width:260px; margin:10px auto;" id="memory-grid"></div><button class="action-btn" onclick="initMemory()">RESHUFFLE</button></div>
        <div id="game9" class="game-section"><h2>é–ƒé¿çƒ</h2><p style="font-size:12px; color:#888;">ä½¿ç”¨ä¸‹æ–¹å·¦å³éµèº²é¿</p><canvas id="dodge-canvas" width="300" height="300"></canvas><div class="score-board">SURVIVED: <span id="dodge-score">0</span></div><button class="action-btn" onclick="startDodge()">START</button></div>
        <div id="game10" class="game-section"><h2>æ•¸å­¸éš¨å ‚è€ƒ</h2><div class="score-board">SCORE: <span id="math-score">0</span></div><div id="math-question" style="font-size:32px;margin:20px; font-weight:bold; color:#fff;">?</div><input type="number" id="math-input" placeholder="ANS"><br><button class="action-btn" onclick="checkMath()">SUBMIT</button></div>
        <div id="game11" class="game-section"><h2>æ‰“ç£šå¡Š</h2><div class="score-board">SCORE: <span id="break-score">0</span></div><canvas id="break-canvas" width="300" height="300"></canvas><p style="font-size:12px; color:#888;">ä½¿ç”¨ä¸‹æ–¹å·¦å³éµç§»å‹•</p><button class="action-btn" onclick="startBreakout()">START</button></div>
        <div id="game12" class="game-section"><h2>è¸©åœ°é›·</h2><div id="minesweeper-grid" style="display:grid; gap:2px; margin:10px auto; width:fit-content; background:#333; padding:2px;"></div><div class="score-board" id="mine-msg"></div><button class="action-btn" onclick="initMinesweeper()">RESET</button></div>
        <div id="game13" class="game-section"><h2>å¹¸é‹æ‹‰éœ¸</h2><div style="display:flex; justify-content:center; gap:10px; margin:20px;"><div id="reel1" style="font-size:40px; width:50px; background:#222; border:1px solid #555;">7</div><div id="reel2" style="font-size:40px; width:50px; background:#222; border:1px solid #555;">7</div><div id="reel3" style="font-size:40px; width:50px; background:#222; border:1px solid #555;">7</div></div><div id="slot-msg" style="color:var(--neon-green)">è©¦è©¦æ‰‹æ°£</div><button class="action-btn" onclick="spinSlots()">SPIN</button></div>
        <div id="game14" class="game-section"><h2>åºåˆ—è¨˜æ†¶</h2><div class="score-board">LEVEL: <span id="simon-level">1</span></div><div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; width:200px; margin:10px auto;"><div style="height:80px;background:#f05;border-radius:10px;opacity:0.4;" id="sb-0" onclick="handleSimonInput(0)"></div><div style="height:80px;background:#0f5;border-radius:10px;opacity:0.4;" id="sb-1" onclick="handleSimonInput(1)"></div><div style="height:80px;background:#05f;border-radius:10px;opacity:0.4;" id="sb-2" onclick="handleSimonInput(2)"></div><div style="height:80px;background:#fc0;border-radius:10px;opacity:0.4;" id="sb-3" onclick="handleSimonInput(3)"></div></div><div id="simon-msg">é»æ“Šé–‹å§‹</div><button class="action-btn" onclick="startSimon()">START</button></div>
        
        <div id="game15" class="game-section">
            <h2>æ•¸å­—æ¨ç›¤</h2>
            <div class="puzzle-grid" id="puzzle-grid"></div>
            <div id="puzzle-msg" style="margin-top:10px; color:#888;">ç›®æ¨™: æ’åˆ— 1-15</div>
            <button class="action-btn" onclick="initPuzzle()">SHUFFLE</button>
        </div>

        <div id="game16" class="game-section">
            <h2>ä¿„ç¾…æ–¯æ–¹å¡Š</h2>
            <div class="score-board">SCORE: <span id="tetris-score">0</span> <span class="best-score">BEST: <span id="tetris-best">0</span></span></div>
            <canvas id="tetris-canvas" width="240" height="400"></canvas>
            <p style="font-size:12px;color:#888;">ä¸Š:è®Šå½¢ / A:è®Šå½¢</p>
            <button class="action-btn" onclick="startTetris()">PLAY</button>
        </div>

        <div id="game17" class="game-section">
            <h2>é£›ç¿”å°é³¥</h2>
            <div class="score-board">SCORE: <span id="bird-score">0</span></div>
            <canvas id="bird-canvas" width="300" height="400"></canvas>
            <p style="font-size:12px;color:#888;">æŒ‰Aéµæˆ–é»æ“Šè¢å¹•é£›è¡Œ</p>
            <button class="action-btn" onclick="startBird()">FLY</button>
        </div>

        <div id="game18" class="game-section"><h2>å¾©å¤ä¹’ä¹“</h2><div class="score-board"><span id="pong-user">0</span> : <span id="pong-cpu">0</span></div><canvas id="pong-canvas" width="300" height="240"></canvas><p style="font-size:12px;color:#888;">ä½¿ç”¨ä¸Šä¸‹éµç§»å‹•</p><button class="action-btn" onclick="startPong()">SERVE</button></div>

        <div id="game19" class="game-section">
            <h2>2048</h2>
            <div class="score-board">SCORE: <span id="g2048-score">0</span></div>
            <div id="grid-2048"></div>
            <button class="action-btn" onclick="init2048()">RESET</button>
        </div>

        <div id="game20" class="game-section"><h2>å­—è‰²å¤§è€ƒé©—</h2><p style="font-size:14px;">é»æ“Šèˆ‡<b>æ–‡å­—é¡è‰²</b>ç›¸ç¬¦çš„æŒ‰éˆ•ï¼</p><div class="score-board">SCORE: <span id="stroop-score">0</span> | TIME: <span id="stroop-time">30</span></div><div id="stroop-word" style="font-size:60px; font-weight:bold; margin:10px;">æ–‡å­—</div><div class="stroop-btns" id="stroop-btns" style="display:flex; flex-wrap:wrap; justify-content:center;"></div><button class="action-btn" onclick="startStroop()">START</button></div>

        <div id="game21" class="game-section"><h2>é»‘ç™½æ£‹</h2><div class="score-board">âš«: <span id="rev-b">2</span> | âšª: <span id="rev-w">2</span></div><div id="reversi-board" style="display:grid; grid-template-columns:repeat(8,1fr); gap:1px; background:#444; padding:2px; width:280px; margin:5px auto;"></div><button class="action-btn" onclick="initReversi()">RESTART</button></div>
        <div id="game22" class="game-section"><h2>é»ç‡ˆéŠæˆ²</h2><div id="lo-board" style="display:grid; grid-template-columns:repeat(5,1fr); gap:5px; width:250px; margin:10px auto;"></div><div class="score-board" id="lo-msg"></div><button class="action-btn" onclick="initLightsOut()">RESET</button></div>
        <div id="game23" class="game-section"><h2>å››å­æ£‹</h2><div class="score-board" id="c4-status">ç´…æ–¹å›åˆ</div><div id="c4-board" style="display:grid; grid-template-columns:repeat(7,1fr); gap:4px; background:#0044aa; padding:8px; width:280px; margin:10px auto; border-radius:8px;"></div><button class="action-btn" onclick="initConnect4()">RESET</button></div>
        
        <div id="game24" class="game-section">
            <h2>æ²³å…§å¡”</h2>
            <div class="control-panel">
                <div class="control-btn active" onclick="setHanoiDiff(3, this)">3å±¤</div>
                <div class="control-btn" onclick="setHanoiDiff(5, this)">5å±¤</div>
            </div>
            <div class="score-board" id="hanoi-msg">æ­¥æ•¸: 0</div>
            <div id="hanoi-area" style="display:flex; justify-content:space-around; width:100%; height:180px; align-items:flex-end; border-bottom:2px solid #444; padding-bottom:5px;">
                <div class="tower" id="t0" onclick="clickTower(0)" style="width:60px; height:150px; position:relative; display:flex; flex-direction:column-reverse; align-items:center;"></div>
                <div class="tower" id="t1" onclick="clickTower(1)" style="width:60px; height:150px; position:relative; display:flex; flex-direction:column-reverse; align-items:center;"></div>
                <div class="tower" id="t2" onclick="clickTower(2)" style="width:60px; height:150px; position:relative; display:flex; flex-direction:column-reverse; align-items:center;"></div>
            </div>
            <button class="action-btn" onclick="initHanoi()">RESTART</button>
        </div>

        <div id="game25" class="game-section">
            <h2>éš¨æ‰‹å¡—é´‰</h2>
            <div class="paint-controls">
                <div class="color-pick" style="background:#fff" onclick="setPaintColor('#fff')"></div>
                <div class="color-pick" style="background:#f00" onclick="setPaintColor('#f00')"></div>
                <div class="color-pick" style="background:#0f0" onclick="setPaintColor('#0f0')"></div>
                <div class="color-pick" style="background:#00f" onclick="setPaintColor('#00f')"></div>
                <button onclick="clearPaint()" style="font-size:12px;">CLS</button>
            </div>
            <canvas id="paint-canvas" width="280" height="280" style="background:#111; border:1px solid #333; margin-top:10px;"></canvas>
        </div>
    </div>

    <div id="mobile-controls">
        <div class="d-pad">
            <div class="d-btn d-up" data-key="ArrowUp" data-dir="up">â–²</div>
            <div class="d-btn d-left" data-key="ArrowLeft" data-dir="left">â—€</div>
            <div class="d-btn d-down" data-key="ArrowDown" data-dir="down">â–¼</div>
            <div class="d-btn d-right" data-key="ArrowRight" data-dir="right">â–¶</div>
        </div>
        <div class="action-pad">
            <div class="a-btn" data-key=" " id="btn-action">A</div>
        </div>
    </div>

    <script>
        function saveData(k,v){ localStorage.setItem('wayna_v9_'+k, v); }
        function loadData(k){ return localStorage.getItem('wayna_v9_'+k) || 0; }
        let slkS = parseInt(loadData('slackTime'));
        setInterval(()=>{ slkS++; saveData('slackTime', slkS); document.getElementById('slack-timer').innerText=new Date(slkS*1000).toISOString().substr(11,8); },1000);
        
        let activeGame='welcome', intervals=[];
        function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }
        function switchGame(id){
            intervals.forEach(clearInterval); intervals=[];
            document.querySelectorAll('.game-section').forEach(e=>e.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b=>{
                b.classList.remove('active');
                if(b.getAttribute('onclick').includes(id)) b.classList.add('active');
            });
            activeGame=id;
            document.getElementById('sidebar').classList.remove('open');
            loadBestScores();
            if(id==='game7') createMoleGrid();
            if(id==='game8') initMemory();
            if(id==='game10') initMath();
            if(id==='game12') initMinesweeper();
            if(id==='game15') initPuzzle();
            if(id==='game19') init2048();
            if(id==='game21') initReversi();
            if(id==='game22') initLightsOut();
            if(id==='game23') initConnect4();
            if(id==='game24') initHanoi();
            if(id==='game25') initPaint();
        }

        function loadBestScores(){
            if(document.getElementById('snake-best')) document.getElementById('snake-best').innerText = loadData('snakeBest');
            if(document.getElementById('tetris-best')) document.getElementById('tetris-best').innerText = loadData('tetrisBest');
        }

        // --- Keyboard & Touch Logic ---
        function handleInput(key, type) {
            // Type: 'down' (press), 'up' (release)
            const isDown = type === 'down';

            // Global prevent scroll for game keys
            if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(key) && ['game6','game9','game11','game16','game17','game18','game19'].includes(activeGame)) {
                // Prevent default handled in event listener, but good to know
            }

            if(isDown) {
                if(activeGame==='game6') snakeKey(key);
                if(activeGame==='game16') tetrisKey(key);
                if(activeGame==='game17') birdKey(key);
                if(activeGame==='game19') handle2048(key);
            }
            
            // Hold-to-move games (State based)
            if(activeGame==='game9') dodgeKey(key, isDown);
            if(activeGame==='game11') breakKey(key, isDown);
            if(activeGame==='game18') pongKey(key, isDown);
        }

        window.addEventListener('keydown', e => handleInput(e.key, 'down'));
        window.addEventListener('keyup', e => handleInput(e.key, 'up'));

        // Mobile Control Binding
        document.querySelectorAll('.d-btn, .a-btn').forEach(btn => {
            const key = btn.getAttribute('data-key');
            
            // Touch Events
            btn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                btn.classList.add('active-touch');
                handleInput(key, 'down');
            });
            btn.addEventListener('touchend', (e) => {
                e.preventDefault();
                btn.classList.remove('active-touch');
                handleInput(key, 'up');
            });

            // Mouse Events for testing on desktop
            btn.addEventListener('mousedown', (e) => {
                btn.classList.add('active-touch');
                handleInput(key, 'down');
            });
            btn.addEventListener('mouseup', (e) => {
                btn.classList.remove('active-touch');
                handleInput(key, 'up');
            });
            btn.addEventListener('mouseleave', (e) => {
                btn.classList.remove('active-touch');
                handleInput(key, 'up');
            });
        });

        // --- Game Logic Functions (Optimized/Minified) ---
        // Tic Tac Toe
        let tb=Array(9).fill(null); 
        function resetTTT(){tb=Array(9).fill(null);rTTT();document.getElementById('ttt-status').innerText="è¼ªåˆ°ä½ ";} 
        function rTTT(){const b=document.getElementById('ttt-board');b.innerHTML='';tb.forEach((v,i)=>{let c=document.createElement('div');c.className=`cell ${v?'taken':''}`;c.innerText=v||'';c.onclick=()=>pTTT(i);b.appendChild(c);});} 
        function pTTT(i){ if(tb[i]||cTTT(tb))return; tb[i]='X'; rTTT(); if(!cTTT(tb)) setTimeout(cpuTTT, 200); else eTTT(); }
        function cpuTTT(){ let bestScore = -Infinity, move; for(let i=0; i<9; i++){ if(tb[i]===null){ tb[i]='O'; let score = minimax(tb, 0, false); tb[i]=null; if(score > bestScore){ bestScore = score; move = i; } } } if(move !== undefined) tb[move]='O'; rTTT(); eTTT(); }
        let scores = {X: -10, O: 10, tie: 0};
        function minimax(board, depth, isMaximizing){ let result = cTTT(board); if(result !== null) return scores[result]; if(!board.includes(null)) return scores['tie']; if(isMaximizing){ let bestScore = -Infinity; for(let i=0; i<9; i++){ if(board[i]===null){ board[i]='O'; let score = minimax(board, depth+1, false); board[i]=null; bestScore = Math.max(score, bestScore); } } return bestScore; } else { let bestScore = Infinity; for(let i=0; i<9; i++){ if(board[i]===null){ board[i]='X'; let score = minimax(board, depth+1, true); board[i]=null; bestScore = Math.min(score, bestScore); } } return bestScore; } }
        function cTTT(b){ const w=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]; for(let l of w) if(b[l[0]]&&b[l[0]]===b[l[1]]&&b[l[0]]===b[l[2]]) return b[l[0]]; return b.includes(null)?null:'tie'; }
        function eTTT(){ let w=cTTT(tb), s=document.getElementById('ttt-status'); if(w==='tie') s.innerText="å¹³æ‰‹"; else if(w==='O') s.innerText="é›»è…¦è´äº†"; else if(w==='X') s.innerText="ä¸å¯èƒ½"; }

        // Simple Games
        let gT=Math.floor(Math.random()*100)+1; function checkGuess(){let v=parseInt(document.getElementById('guess-input').value),m=document.getElementById('guess-result');if(v===gT){m.innerText="ğŸ‰ çŒœå°äº†!";m.style.color="#00ADB5";}else m.innerText=v>gT?"å¤ªå¤§äº†":"å¤ªå°äº†";document.getElementById('guess-input').value='';} function resetGuess(){gT=Math.floor(Math.random()*100)+1;document.getElementById('guess-result').innerText="æ–°å±€å·²é–‹";}
        function playRPS(u){const c=['âœŠ','âœ‹','âœŒ'][Math.floor(Math.random()*3)];let r="å¹³æ‰‹";if((u=='âœŠ'&&c=='âœŒ')||(u=='âœ‹'&&c=='âœŠ')||(u=='âœŒ'&&c=='âœ‹'))r="ä½ è´äº†";else if(u!==c)r="é›»è…¦è´";document.getElementById('rps-result').innerText=`ä½ ${u} vs ${c}é›»è…¦ -> ${r}`;}
        let clkS=0,clkA=false; function startClicker(){if(clkA)return;clkS=0;clkA=true;let t=5.0;document.getElementById('click-score').innerText=0;intervals.push(setInterval(()=>{t-=0.1;document.getElementById('click-time').innerText=t.toFixed(1);if(t<=0){clkA=false;document.getElementById('click-time').innerText="0.0";alert(`æˆç¸¾: ${clkS}`);intervals.forEach(clearInterval);}},100));} function clickCount(){if(clkA)document.getElementById('click-score').innerText=++clkS;}
        let refT; function startReflex(){let b=document.getElementById('reflex-box');b.style.background="#ce1212";b.innerText="ç­‰å¾…...";b.onmousedown=null;b.ontouchstart=null;refT=setTimeout(()=>{b.style.background="#00b894";b.innerText="é»æ“Š!";let s=Date.now();const hit=()=>{document.getElementById('reflex-msg').innerText=`${Date.now()-s} ms`;b.onmousedown=null;b.ontouchstart=null;};b.onmousedown=hit;b.ontouchstart=(e)=>{e.preventDefault();hit();};},1000+Math.random()*2000);} function reflexClick(){if(document.getElementById('reflex-box').style.background!=='rgb(0, 184, 148)'){clearTimeout(refT);document.getElementById('reflex-msg').innerText="å¤ªæ—©äº†!";}}

        // Snake
        let snk=[],sfd={},sd,ssc=0, snakeSpeed=130; const sctx=document.getElementById('snake-canvas').getContext('2d'); 
        function setSnakeSpeed(s, el){ snakeSpeed = s; document.querySelectorAll('#game6 .control-btn').forEach(b=>b.classList.remove('active')); el.classList.add('active'); }
        function startSnake(){ snk=[{x:135,y:150}]; sfd={x:Math.floor(Math.random()*19)*15,y:Math.floor(Math.random()*19)*15}; sd="RIGHT"; ssc=0; document.getElementById('snake-score').innerText=0; intervals.forEach(clearInterval); intervals.push(setInterval(drawSnake, snakeSpeed)); } 
        function snakeKey(k){if((k=='ArrowLeft'||k=='a')&&sd!='RIGHT')sd='LEFT';if((k=='ArrowUp'||k=='w')&&sd!='DOWN')sd='UP';if((k=='ArrowRight'||k=='d')&&sd!='LEFT')sd='RIGHT';if((k=='ArrowDown'||k=='s')&&sd!='UP')sd='DOWN';} 
        function drawSnake(){ sctx.fillStyle='#222831';sctx.fillRect(0,0,300,300);for(let i=0;i<snk.length;i++){sctx.fillStyle=i==0?'#00ADB5':'#EEE';sctx.fillRect(snk[i].x,snk[i].y,15,15);}sctx.fillStyle='#FF2E63';sctx.fillRect(sfd.x,sfd.y,15,15);let h={x:snk[0].x,y:snk[0].y};if(sd=='LEFT')h.x-=15;if(sd=='UP')h.y-=15;if(sd=='RIGHT')h.x+=15;if(sd=='DOWN')h.y+=15; if(h.x==sfd.x&&h.y==sfd.y){ssc++; document.getElementById('snake-score').innerText=ssc;sfd={x:Math.floor(Math.random()*19)*15,y:Math.floor(Math.random()*19)*15};}else snk.pop(); if(h.x<0||h.x>=300||h.y<0||h.y>=300||snk.some(s=>s.x==h.x&&s.y==h.y)){clearInterval(intervals[0]); if(ssc > parseInt(loadData('snakeBest'))){ saveData('snakeBest', ssc); loadBestScores(); alert(`æ–°ç´€éŒ„! ${ssc}`); }else alert("Game Over: "+ssc);}else snk.unshift(h); }

        // Whack a Mole
        let msc=0,mt=30; function createMoleGrid(){const g=document.getElementById('mole-grid');g.innerHTML='';for(let i=0;i<9;i++){let d=document.createElement('div');d.style.cssText="width:60px;height:60px;background:#222;border-radius:50%;position:relative;overflow:hidden;border:2px solid #555;";d.id=`mh-${i}`;d.innerHTML='<div class="mole" style="width:100%;height:100%;background:#bc13fe;border-radius:50%;position:absolute;top:100%;transition:top 0.1s;"></div>';const hit=()=>{bonk(i);};d.onmousedown=hit;d.ontouchstart=(e)=>{e.preventDefault();hit();};g.appendChild(d);}} function startMole(){msc=0;mt=30;document.getElementById('mole-score').innerText=0;document.getElementById('mole-time').innerText=30;peep();intervals.push(setInterval(()=>{mt--;document.getElementById('mole-time').innerText=mt;if(mt<=0){intervals.forEach(clearInterval);alert("æ™‚é–“åˆ°: "+msc);}},1000));} function peep(){if(mt<=0)return;let h=document.getElementById(`mh-${Math.floor(Math.random()*9)}`);let m=h.querySelector('.mole');m.style.top='0';setTimeout(()=>{m.style.top='100%';if(mt>0)setTimeout(peep,300+Math.random()*500);},500+Math.random()*500);} function bonk(i){let h=document.getElementById(`mh-${i}`);let m=h.querySelector('.mole');if(m.style.top==='0px'){msc++;document.getElementById('mole-score').innerText=msc;m.style.top='100%';}}
        
        // Memory
        let mc=[],hasF=false,lk=false,fc,scrd; function initMemory(){const g=document.getElementById('memory-grid');g.innerHTML='';mc=['ğŸ','ğŸ','ğŸŒ','ğŸŒ','ğŸ‡','ğŸ‡','ğŸ‰','ğŸ‰','ğŸ¶','ğŸ¶','ğŸ±','ğŸ±','ğŸ¦Š','ğŸ¦Š','ğŸ¸','ğŸ¸'].sort(()=>0.5-Math.random());mc.forEach(i=>{let c=document.createElement('div');c.style.cssText="width:55px;height:55px;background:#00f3ff;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:32px;color:transparent;cursor:pointer;";c.dataset.f=i;c.innerText=i;c.onclick=flipC;g.appendChild(c);});hasF=false;lk=false;} function flipC(){if(lk||this===fc)return;this.style.background='#fff';this.style.color='#333';if(!hasF){hasF=true;fc=this;return;}scrd=this;lk=true;if(fc.dataset.f===scrd.dataset.f){fc.style.visibility='hidden';scrd.style.visibility='hidden';resetB();}else{setTimeout(()=>{fc.style.background='#00f3ff';fc.style.color='transparent';scrd.style.background='#00f3ff';scrd.style.color='transparent';resetB();},1000);}} function resetB(){[hasF,lk]=[false,false];[fc,scrd]=[null,null];}
        
        // Dodgeball
        let dpx=135,dms=[],dsc=0,dmv=0; const dct=document.getElementById('dodge-canvas').getContext('2d'); function startDodge(){dpx=135;dms=[];dsc=0;dmv=0;document.getElementById('dodge-score').innerText="0";intervals.forEach(clearInterval);intervals.push(setInterval(updDodge,20));intervals.push(setInterval(()=>{dms.push({x:Math.random()*280,y:-20,s:2+Math.random()*3});dsc++;document.getElementById('dodge-score').innerText=(dsc/10).toFixed(1);},500));} function dodgeKey(k,d){if(k=='ArrowLeft'||k=='a')dmv=d?-4:0;if(k=='ArrowRight'||k=='d')dmv=d?4:0;} function updDodge(){dct.fillStyle='#222831';dct.fillRect(0,0,300,300);dpx+=dmv;if(dpx<0)dpx=0;if(dpx>280)dpx=280;dct.fillStyle='#00ADB5';dct.beginPath();dct.moveTo(dpx+10,270);dct.lineTo(dpx,290);dct.lineTo(dpx+20,290);dct.fill();dct.fillStyle='#FF2E63';dms.forEach(m=>{m.y+=m.s;dct.beginPath();dct.arc(m.x,m.y,8,0,6.28);dct.fill();});if(dms.some(m=>m.x>dpx-5&&m.x<dpx+25&&m.y>270&&m.y<290)){intervals.forEach(clearInterval);alert("Game Over: "+(dsc/10));}}

        // Math
        let mA,mB; function initMath(){mA=Math.floor(Math.random()*20)+1;mB=Math.floor(Math.random()*20)+1;document.getElementById('math-question').innerText=`${mA} + ${mB} = ?`;} function checkMath(){let v=parseInt(document.getElementById('math-input').value);let s=document.getElementById('math-score');if(v===mA+mB){s.innerText=parseInt(s.innerText)+1;document.getElementById('math-input').value='';initMath();}else{alert("éŒ¯äº†! æ­¸é›¶");s.innerText=0;document.getElementById('math-input').value='';}}
        
        // Breakout
        let bPX=110,bBall={x:150,y:250,dx:3,dy:-3},bBrks=[],bSc=0,bMv=0; const bctx=document.getElementById('break-canvas').getContext('2d'); function startBreakout(){bPX=110;bBall={x:150,y:250,dx:3,dy:-3};bSc=0;bBrks=[];bMv=0;document.getElementById('break-score').innerText=0;for(let c=0;c<5;c++)for(let r=0;r<4;r++)bBrks.push({x:c*60+5,y:r*30+30,s:1});intervals.forEach(clearInterval);intervals.push(setInterval(drBrk,20));} function breakKey(k,d){if(k=='ArrowLeft'||k=='a')bMv=d?-5:0;if(k=='ArrowRight'||k=='d')bMv=d?5:0;} function drBrk(){bctx.fillStyle='#222831';bctx.fillRect(0,0,300,300);bPX+=bMv;if(bPX<0)bPX=0;if(bPX>220)bPX=220;bctx.fillStyle='#00ADB5';bctx.fillRect(bPX,280,80,10);bBrks.forEach(b=>{if(b.s){bctx.fillStyle='#FF2E63';bctx.fillRect(b.x,b.y,50,20);if(bBall.x>b.x&&bBall.x<b.x+50&&bBall.y>b.y&&bBall.y<b.y+20){bBall.dy=-bBall.dy;b.s=0;bSc++;document.getElementById('break-score').innerText=bSc;}}});bBall.x+=bBall.dx;bBall.y+=bBall.dy;if(bBall.x<0||bBall.x>300)bBall.dx=-bBall.dx;if(bBall.y<0)bBall.dy=-bBall.dy;if(bBall.y>300){intervals.forEach(clearInterval);alert("Game Over");return;}if(bBall.y>270&&bBall.y<280&&bBall.x>bPX&&bBall.x<bPX+80)bBall.dy=-Math.abs(bBall.dy);bctx.beginPath();bctx.arc(bBall.x,bBall.y,5,0,6.28);bctx.fillStyle='#fff';bctx.fill();}

        // Minesweeper
        let msG=[],msM=[],msR=0,msGO=false; function initMinesweeper(){const g=document.getElementById('minesweeper-grid');g.innerHTML='';g.style.gridTemplateColumns='repeat(8, 1fr)';document.getElementById('mine-msg').innerText='';msM=[];msR=0;msGO=false;let idx=Array(64).fill(0).map((_,i)=>i).sort(()=>Math.random()-0.5);let bmbs=idx.slice(0,8);for(let i=0;i<64;i++){let d=document.createElement('div');d.style.cssText="width:30px;height:30px;background:#555;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;font-size:16px;";d.onclick=()=>clkMine(i,bmbs, d);if(bmbs.includes(i))msM.push(i);g.appendChild(d);}} function clkMine(i,bmbs, d){if(msGO)return;let cs=document.querySelectorAll('#minesweeper-grid div');if(bmbs.includes(i)){d.style.background='#d00';d.innerText='ğŸ’£';document.getElementById('mine-msg').innerText="ğŸ’¥ çˆ†ç‚¸!";msGO=true;bmbs.forEach(b=>{cs[b].style.background='#d00';cs[b].innerText='ğŸ’£';});}else{let c=0,adj=[-9,-8,-7,-1,1,7,8,9];adj.forEach(a=>{let n=i+a;if(n>=0&&n<64&&Math.abs((n%8)-(i%8))<=1&&bmbs.includes(n))c++;});d.style.background='#222';d.style.color='#0aff68';d.innerText=c>0?c:'';d.onclick=null;msR++;if(msR===56){document.getElementById('mine-msg').innerText="ğŸ‰ æˆåŠŸ!";msGO=true;}}}
        
        // Slots & Simon
        function spinSlots(){let m=document.getElementById('slot-msg');m.innerText="...";let rs=[document.getElementById('reel1'),document.getElementById('reel2'),document.getElementById('reel3')],res=[];rs.forEach((r,i)=>{let c=0,iv=setInterval(()=>{r.innerText=Math.floor(Math.random()*9)+1;c++;if(c>10+i*5){clearInterval(iv);let f=Math.floor(Math.random()*9)+1;r.innerText=f;res.push(f);if(res.length===3){m.innerText=(res[0]==res[1]&&res[1]==res[2])?"ğŸ‰ ä¸­ç!":"å†è©¦ä¸€æ¬¡";}}},50);});}
        let simQ=[],simU=[],simL=1,simT=false; function startSimon(){simQ=[];simL=1;nxtSim();} function nxtSim(){simU=[];simT=false;document.getElementById('simon-level').innerText=simL;document.getElementById('simon-msg').innerText="çœ‹ä»”ç´°...";simQ.push(Math.floor(Math.random()*4));let i=0,iv=setInterval(()=>{flshSim(simQ[i]);i++;if(i>=simQ.length){clearInterval(iv);simT=true;document.getElementById('simon-msg').innerText="æ›ä½ ";}},600);} function flshSim(i){let b=document.getElementById(`sb-${i}`);b.style.opacity='1';setTimeout(()=>b.style.opacity='0.4',300);} function handleSimonInput(i){if(!simT)return;flshSim(i);simU.push(i);if(simU[simU.length-1]!==simQ[simU.length-1]){document.getElementById('simon-msg').innerText="âŒ éŒ¯èª¤!";simT=false;return;}if(simU.length===simQ.length){simT=false;simL++;document.getElementById('simon-msg').innerText="âœ… æ­£ç¢º!";setTimeout(nxtSim,1000);}}
        
        // Puzzle 15
        let pT=[]; function initPuzzle(){pT=Array(16).fill(0).map((_,i)=>i);for(let i=0;i<200;i++){let e=pT.indexOf(15),n=[],dirs=[-1,1,-4,4];dirs.forEach(d=>{let t=e+d;if(t>=0&&t<16&&!(e%4==0&&d==-1)&&!(e%4==3&&d==1))n.push(t);});let s=n[Math.floor(Math.random()*n.length)];[pT[e],pT[s]]=[pT[s],pT[e]];}renPuz();} function renPuz(){const g=document.getElementById('puzzle-grid');g.innerHTML='';pT.forEach((v,i)=>{let d=document.createElement('div');d.className=`puzzle-tile ${v===15?'empty':''}`;d.innerText=v===15?'':v+1;d.onclick=()=>mvTile(i);g.appendChild(d);});let w=true; for(let i=0;i<15;i++)if(pT[i]!==i)w=false;document.getElementById('puzzle-msg').innerText=w?"ğŸ‰ å®Œæˆ!":"æ’åˆ— 1-15";} function mvTile(i){let e=pT.indexOf(15);if(Math.abs(i-e)===4||(Math.abs(i-e)===1&&Math.floor(i/4)===Math.floor(e/4))){[pT[i],pT[e]]=[pT[e],pT[i]];renPuz();}}

        // Tetris
        const tCtx = document.getElementById('tetris-canvas').getContext('2d'); const ROW=20, COL=12, SQ=20; let tBoard=[], tPiece, tScore=0, tDropStart; const PIECES = [ [Z,"red"], [S,"green"], [T,"purple"], [O,"yellow"], [L,"orange"], [I,"cyan"], [J,"blue"] ]; function Z(){return[[1,1,0],[0,1,1],[0,0,0]];} function S(){return[[0,1,1],[1,1,0],[0,0,0]];} function T(){return[[0,1,0],[1,1,1],[0,0,0]];} function O(){return[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]];} function L(){return[[0,0,1],[1,1,1],[0,0,0]];} function I(){return[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]];} function J(){return[[1,0,0],[1,1,1],[0,0,0]];} function drawSquare(x,y,c){ tCtx.fillStyle=c; tCtx.fillRect(x*SQ,y*SQ,SQ,SQ); tCtx.strokeStyle="#333"; tCtx.strokeRect(x*SQ,y*SQ,SQ,SQ); } function startTetris(){ tBoard=[]; for(let r=0;r<ROW;r++) tBoard[r]=Array(COL).fill("BLACK"); tPiece = randomPiece(); tScore=0; document.getElementById('tetris-score').innerText=0; intervals.forEach(clearInterval); tDropStart = Date.now(); intervals.push(setInterval(updateTetris, 1000/60)); } function randomPiece(){ let r = Math.floor(Math.random()*PIECES.length); return { active:PIECES[r][0](), color:PIECES[r][1], x:4, y:0 }; } function drawTetris(){ tCtx.fillStyle="black"; tCtx.fillRect(0,0,240,400); for(let r=0;r<ROW;r++) for(let c=0;c<COL;c++) drawSquare(c,r,tBoard[r][c]); for(let r=0;r<tPiece.active.length;r++) for(let c=0;c<tPiece.active.length;c++) if(tPiece.active[r][c]) drawSquare(tPiece.x+c, tPiece.y+r, tPiece.color); } function moveTetris(x,y,p){ for(let r=0;r<p.length;r++) for(let c=0;c<p.length;c++){ if(!p[r][c]) continue; let newX = tPiece.x + c + x; let newY = tPiece.y + r + y; if(newX<0 || newX>=COL || newY>=ROW) return true; if(newY<0) continue; if(tBoard[newY][newX] != "BLACK") return true; } return false; } 
        function updateTetris(){ let now = Date.now(); if(now - tDropStart > 500){ if(!moveTetris(0,1,tPiece.active)) tPiece.y++; else { lockTetris(); tPiece=randomPiece(); if(moveTetris(0,0,tPiece.active)) { intervals.forEach(clearInterval); if(tScore > parseInt(loadData('tetrisBest'))){ saveData('tetrisBest', tScore); loadBestScores(); alert("æ–°ç´€éŒ„! "+tScore); }else alert("Game Over"); } } tDropStart = Date.now(); } drawTetris(); } function lockTetris(){ for(let r=0;r<tPiece.active.length;r++) for(let c=0;c<tPiece.active.length;c++) if(tPiece.active[r][c] && (tPiece.y+r)>=0) tBoard[tPiece.y+r][tPiece.x+c] = tPiece.color; for(let r=0;r<ROW;r++){ let isFull = true; for(let c=0;c<COL;c++) if(tBoard[r][c]=="BLACK") isFull=false; if(isFull){ tScore+=10; document.getElementById('tetris-score').innerText=tScore; for(let y=r; y>1; y--) for(let c=0;c<COL;c++) tBoard[y][c]=tBoard[y-1][c]; for(let c=0;c<COL;c++) tBoard[0][c]="BLACK"; } } } function tetrisKey(k){ if(k=="ArrowLeft" && !moveTetris(-1,0,tPiece.active)) tPiece.x--; if(k=="ArrowRight" && !moveTetris(1,0,tPiece.active)) tPiece.x++; if(k=="ArrowDown" && !moveTetris(0,1,tPiece.active)) tPiece.y++; if(k=="ArrowUp" || k==" "){ let nextPattern = tPiece.active[0].map((val, index) => tPiece.active.map(row => row[index]).reverse()); if(!moveTetris(0,0,nextPattern)) tPiece.active = nextPattern; } }

        // Bird
        const birdCtx = document.getElementById('bird-canvas').getContext('2d'); let bird={x:50,y:150,v:0}, pipes=[], birdScore=0, birdFrame=0; function startBird(){ bird={x:50,y:150,v:0}; pipes=[]; birdScore=0; birdFrame=0; document.getElementById('bird-score').innerText=0; intervals.forEach(clearInterval); intervals.push(setInterval(updateBird, 20)); document.getElementById('bird-canvas').onmousedown = ()=>bird.v = -4.5; document.getElementById('bird-canvas').ontouchstart = (e)=>{e.preventDefault(); bird.v = -4.5;}; } function updateBird(){ birdCtx.fillStyle = "#70c5ce"; birdCtx.fillRect(0,0,300,400); bird.v += 0.25; bird.y += bird.v; birdCtx.fillStyle = "#FF2E63"; birdCtx.fillRect(bird.x, bird.y, 20, 20); if(birdFrame%100 === 0) { let gap=100, h=Math.random()*200+50; pipes.push({x:300, top:h, bot:h+gap}); } birdFrame++; for(let i=0; i<pipes.length; i++){ let p = pipes[i]; p.x -= 2; birdCtx.fillStyle = "#00ADB5"; birdCtx.fillRect(p.x, 0, 40, p.top); birdCtx.fillRect(p.x, p.bot, 40, 400-p.bot); if(bird.x+20 > p.x && bird.x < p.x+40 && (bird.y < p.top || bird.y+20 > p.bot)){ intervals.forEach(clearInterval); alert("æ’åˆ°äº†! åˆ†æ•¸: "+birdScore); } if(p.x === 10) { birdScore++; document.getElementById('bird-score').innerText=birdScore; } } if(bird.y>400 || bird.y<0) { intervals.forEach(clearInterval); alert("å¢œæ©Ÿ! åˆ†æ•¸: "+birdScore); } } function birdKey(k){ if(k===" " || k==="ArrowUp") bird.v = -4.5; }

        // Pong
        const pCtx = document.getElementById('pong-canvas').getContext('2d'); let ball={x:150,y:120,dx:4,dy:4}, p1Y=90, p2Y=90, pScore=[0,0], pMove=0; function startPong(){ ball={x:150,y:120,dx:4,dy:4}; p1Y=90; p2Y=90; pScore=[0,0]; pMove=0; document.getElementById('pong-user').innerText=0; document.getElementById('pong-cpu').innerText=0; intervals.forEach(clearInterval); intervals.push(setInterval(updatePong, 20)); } function updatePong(){ pCtx.fillStyle="#222831"; pCtx.fillRect(0,0,300,240); p1Y += pMove; if(p1Y<0)p1Y=0; if(p1Y>180)p1Y=180; if(ball.y < p2Y+30) p2Y -= 3; else if(ball.y > p2Y+50) p2Y += 3; if(p2Y<0)p2Y=0; if(p2Y>180)p2Y=180; pCtx.fillStyle="#fff"; pCtx.fillRect(0, p1Y, 10, 60); pCtx.fillRect(290, p2Y, 10, 60); pCtx.fillRect(ball.x, ball.y, 8, 8); ball.x += ball.dx; ball.y += ball.dy; if(ball.y<=0 || ball.y>=232) ball.dy *= -1; if(ball.x<=10 && ball.y>=p1Y && ball.y<=p1Y+60) { ball.dx = Math.abs(ball.dx)+0.2; } if(ball.x>=282 && ball.y>=p2Y && ball.y<=p2Y+60) { ball.dx = -Math.abs(ball.dx)-0.2; } if(ball.x<0) { pScore[1]++; resetBall(); } if(ball.x>300) { pScore[0]++; resetBall(); } document.getElementById('pong-user').innerText=pScore[0]; document.getElementById('pong-cpu').innerText=pScore[1]; } function resetBall(){ ball.x=150; ball.y=120; ball.dx = (Math.random()>0.5?1:-1)*4; ball.dy=4; } function pongKey(k,d){ if(k=='w'||k=='ArrowUp') pMove=d?-6:0; if(k=='s'||k=='ArrowDown') pMove=d?6:0; }

        // 2048
        let g2048 = [], s2048=0; function init2048(){ g2048 = Array(16).fill(0); s2048=0; spawn2048(); spawn2048(); render2048(); document.getElementById('g2048-score').innerText=0; } function spawn2048(){ let empty = g2048.map((v,i)=>v===0?i:null).filter(v=>v!==null); if(empty.length) g2048[empty[Math.floor(Math.random()*empty.length)]] = Math.random()<0.9 ? 2 : 4; } function render2048(){ const g = document.getElementById('grid-2048'); g.innerHTML=''; g2048.forEach(v=>{ let d=document.createElement('div'); d.className=`tile-2048`; d.style.cssText="background:#333;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;"; if(v===2)d.style.background='#444'; if(v===4)d.style.background='#555'; if(v>=8)d.style.background='#d35400'; d.innerText=v||''; g.appendChild(d); }); } function handle2048(k){ let old = [...g2048]; if(k==="ArrowLeft") move2048(0,1,2,3, 1); if(k==="ArrowRight") move2048(3,2,1,0, -1); if(k==="ArrowUp") move2048(0,4,8,12, 4); if(k==="ArrowDown") move2048(12,8,4,0, -4); if(JSON.stringify(old) !== JSON.stringify(g2048)) { spawn2048(); render2048(); } } function move2048(i1, i2, i3, i4, step){ for(let i=0; i<4; i++){ let offset = (step===1||step===-1) ? i*4 : i; let indices = [i1, i2, i3, i4].map(x => (step===1||step===-1) ? x+offset : x+offset); let row = indices.map(idx => g2048[idx]).filter(v=>v); for(let j=0; j<row.length-1; j++){ if(row[j]===row[j+1]){ row[j]*=2; s2048+=row[j]; row.splice(j+1,1); document.getElementById('g2048-score').innerText=s2048; } } while(row.length<4) row.push(0); indices.forEach((idx, n) => g2048[idx] = row[n]); } }

        // Stroop
        let stSc=0, stT=30, stColor, stText; const colors = [{n:'ç´…',c:'#f00'},{n:'è—',c:'#00f'},{n:'ç¶ ',c:'#0f0'},{n:'é»ƒ',c:'#ff0'},{n:'ç´«',c:'#800080'}]; function startStroop(){stSc=0; stT=30; document.getElementById('stroop-score').innerText=0; document.getElementById('stroop-time').innerText=30;nextStroop();intervals.forEach(clearInterval);intervals.push(setInterval(()=>{stT--; document.getElementById('stroop-time').innerText=stT;if(stT<=0){ clearInterval(intervals[0]); alert("æ™‚é–“åˆ°! åˆ†æ•¸: "+stSc); }}, 1000));} function nextStroop(){let rt = colors[Math.floor(Math.random()*colors.length)];let rc = colors[Math.floor(Math.random()*colors.length)];stText = rt.n;stColor = rc.c;let el = document.getElementById('stroop-word');el.innerText = stText;el.style.color = stColor;let btns = document.getElementById('stroop-btns');btns.innerHTML = '';let opts = [...colors].sort(()=>0.5-Math.random());opts.forEach(o => {let b = document.createElement('button');b.className = 'action-btn';b.style.backgroundColor = o.c;b.style.color = '#fff';b.style.textShadow = '1px 1px 2px #000';b.innerText = o.n; b.onclick = () => checkStroop(o.c);btns.appendChild(b);});} function checkStroop(clickColor){if(clickColor === stColor){ stSc++; document.getElementById('stroop-score').innerText=stSc; nextStroop(); }else { stT -= 2; document.getElementById('stroop-time').innerText=stT; }}

        // Reversi, LightsOut, Connect4, Hanoi, Paint (Standard Logic)
        let rvBd=[], rvTurn='black'; function initReversi(){rvBd=Array(64).fill(0); rvBd[27]=2; rvBd[28]=1; rvBd[35]=1; rvBd[36]=2; rvTurn='black';drawReversi();} function drawReversi(){const b=document.getElementById('reversi-board'); b.innerHTML='';let bC=0, wC=0;let p = rvTurn=='black'?1:2;rvBd.forEach((v,i)=>{if(v==1) bC++; if(v==2) wC++;let c=document.createElement('div'); c.style.cssText="width:34px;height:34px;background:#084422;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;";if(v!==0){ let t=document.createElement('div'); t.className=`token`; t.style.cssText=`width:28px;height:28px;border-radius:50%;background:${v==1?'#111':'#eee'};border:1px solid #555;`; c.appendChild(t); } else { if(getFlips(i, p).length > 0){let h=document.createElement('div');h.style.cssText="width:10px;height:10px;background:rgba(0,243,255,0.5);border-radius:50%;box-shadow:0 0 5px #0ff;";c.appendChild(h);c.onclick=()=>clickReversi(i); }}b.appendChild(c);});document.getElementById('rev-b').innerText=bC; document.getElementById('rev-w').innerText=wC;} function clickReversi(idx){let p = rvTurn=='black'?1:2;let flipped = getFlips(idx, p);if(flipped.length>0){rvBd[idx]=p;flipped.forEach(f=>rvBd[f]=p);rvTurn = rvTurn=='black'?'white':'black';drawReversi();}} function getFlips(idx, p){if(rvBd[idx]!==0) return [];let flips=[]; let r=Math.floor(idx/8), c=idx%8;for(let dr=-1; dr<=1; dr++){for(let dc=-1; dc<=1; dc++){if(dr==0&&dc==0)continue;let temp=[], r2=r+dr, c2=c+dc;while(r2>=0&&r2<8&&c2>=0&&c2<8){let i2=r2*8+c2;if(rvBd[i2]==0)break;if(rvBd[i2]==p){ flips.push(...temp); break; }temp.push(i2);r2+=dr; c2+=dc;}}}return flips;}
        let loBd=[]; function initLightsOut(){loBd=Array(25).fill(0);for(let i=0; i<15; i++) toggleLight(Math.floor(Math.random()*25), true);drawLO();} function toggleLight(i, silent){let r=Math.floor(i/5), c=i%5;[i, i-1, i+1, i-5, i+5].forEach(idx => {let tr=Math.floor(idx/5), tc=idx%5;if(idx>=0 && idx<25) {if(Math.abs(tr-r) + Math.abs(tc-c) <= 1) loBd[idx] = !loBd[idx];}});if(!silent) drawLO();if(!silent && loBd.every(v=>!v)) document.getElementById('lo-msg').innerText="ğŸ‰ æˆåŠŸé—œç‡ˆ!";} function drawLO(){const b=document.getElementById('lo-board'); b.innerHTML='';loBd.forEach((v,i)=>{let c=document.createElement('div'); c.style.cssText=`height:45px;background:${v?'#bc13fe':'#222'};border-radius:5px;cursor:pointer;border:1px solid #444;transition:0.2s;`;if(v)c.style.boxShadow="0 0 15px #bc13fe";c.onclick=()=>toggleLight(i);b.appendChild(c);});}
        let c4Bd=[], c4Turn=1; function initConnect4(){ c4Bd=Array(42).fill(0); c4Turn=1; drawC4(); document.getElementById('c4-status').innerText="ç´…æ–¹å›åˆ"; } function drawC4(){const b=document.getElementById('c4-board'); b.innerHTML='';c4Bd.forEach((v,i)=>{let c=document.createElement('div'); c.style.cssText=`width:34px;height:34px;background:${v==1?'#ff0044':v==2?'#ffdd00':'#111'};border-radius:50%;cursor:pointer;box-shadow:inset 0 0 5px #000;`;c.onclick=()=>dropC4(i%7);b.appendChild(c);});} function dropC4(col){for(let r=5; r>=0; r--){let idx = r*7+col;if(c4Bd[idx]==0){c4Bd[idx]=c4Turn;if(checkC4Win(idx, c4Turn)) { drawC4(); setTimeout(()=>alert((c4Turn==1?"ç´…æ–¹":"é»ƒæ–¹")+" è´äº†!"),10); return; }c4Turn=c4Turn==1?2:1;document.getElementById('c4-status').innerText=c4Turn==1?"ç´…æ–¹å›åˆ":"é»ƒæ–¹å›åˆ";drawC4();return;}}} function checkC4Win(idx, p){let r=Math.floor(idx/7), c=idx%7;const dirs=[[0,1],[1,0],[1,1],[1,-1]];for(let d of dirs){let count=1;for(let k=1;k<4;k++){ let nr=r+d[0]*k, nc=c+d[1]*k; if(nr>=0&&nr<6&&nc>=0&&nc<7&&c4Bd[nr*7+nc]==p) count++; else break; }for(let k=1;k<4;k++){ let nr=r-d[0]*k, nc=c-d[1]*k; if(nr>=0&&nr<6&&nc>=0&&nc<7&&c4Bd[nr*7+nc]==p) count++; else break; }if(count>=4) return true;}return false;}
        
        let towers=[[],[],[]], selectedDisk=null, hanoiCount=3; function setHanoiDiff(n, el){ hanoiCount = n; document.querySelectorAll('#game24 .control-btn').forEach(b=>b.classList.remove('active')); el.classList.add('active'); initHanoi(); } function initHanoi(){ towers=[[],[],[]]; selectedDisk=null; for(let i=hanoiCount; i>=1; i--) towers[0].push(i); drawHanoi(); document.getElementById('hanoi-msg').innerText="æ­¥æ•¸: 0"; } function drawHanoi(){ [0,1,2].forEach(i=>{ let t=document.getElementById(`t${i}`); t.innerHTML=''; let rod=document.createElement('div'); rod.style.cssText="position:absolute;width:6px;height:100%;background:#444;top:0;left:50%;transform:translateX(-50%);z-index:0;"; t.appendChild(rod); towers[i].forEach(d=>{ let el=document.createElement('div'); el.style.cssText=`height:20px;border-radius:4px;margin-bottom:3px;border:1px solid rgba(255,255,255,0.3);z-index:2;width:${d*15+15}px;background:${['#f00', '#ff8000', '#ff0', '#0f0', '#00f', '#8000ff'][d%6]}`; t.appendChild(el); }); }); } function clickTower(i){ if(selectedDisk===null){ if(towers[i].length>0){ selectedDisk = { val: towers[i].pop(), from: i }; } } else { if(towers[i].length===0 || towers[i][towers[i].length-1] > selectedDisk.val){ towers[i].push(selectedDisk.val); if(selectedDisk.from !== i) document.getElementById('hanoi-msg').innerText = "æ­¥æ•¸: "+ (parseInt(document.getElementById('hanoi-msg').innerText.split(': ')[1])+1); selectedDisk=null; if(towers[2].length==hanoiCount) alert("æ­å–œå®Œæˆ!"); } else { towers[selectedDisk.from].push(selectedDisk.val); selectedDisk=null; alert("ä¸èƒ½æ”¾åœ¨æ›´å°çš„ç›¤å­ä¸Š"); } } drawHanoi(); }
        
        let pColor='#fff', isPainting=false; const pct=document.getElementById('paint-canvas').getContext('2d'); 
        function initPaint(){pct.fillStyle='#222'; pct.fillRect(0,0,280,280); pct.lineWidth=3; pct.lineCap='round'; let c=document.getElementById('paint-canvas'); 
            const start=(x,y)=>{isPainting=true; pct.beginPath(); pct.moveTo(x, y);};
            const move=(x,y)=>{if(isPainting){pct.lineTo(x, y); pct.stroke();}};
            const end=()=>{isPainting=false;};
            c.onmousedown=(e)=>{start(e.offsetX, e.offsetY)}; c.onmousemove=(e)=>{move(e.offsetX, e.offsetY)}; c.onmouseup=end;
            c.ontouchstart=(e)=>{e.preventDefault(); var rect = c.getBoundingClientRect(); start(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);};
            c.ontouchmove=(e)=>{e.preventDefault(); var rect = c.getBoundingClientRect(); move(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);};
            c.ontouchend=end;
        } 
        function setPaintColor(c){ pct.strokeStyle=c; } function clearPaint(){ pct.fillRect(0,0,280,280); }

        loadBestScores();
    </script>
</body>
</html>
